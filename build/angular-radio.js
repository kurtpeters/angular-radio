!function(t,n){"use strict";"function"==typeof define&&define.amd?define(["ngRadio"],n):t.ngRadio=n(t.angular)}(this,function(t){"use strict";function n(){return"c_"+(new Date).getTime()}function e(t){return l[t]||(l[t]=new c)}function i(t,n){for(var e,i=[],r=0;r<t.length;r++)e=t[r],(e.callback===n.callback||void 0!==e.listener&&e.listener===n.listener)&&i.push(r);return i}function r(n,e){var i=/\s+/g,r=Array.prototype.slice.call(arguments,2);return t.isObject(e)?(t.forEach(e,function(t,e){this[n].apply(this,[e,t].concat(r))},this),!0):i.test(e)?(t.forEach(e.split(i),function(t){this[n].apply(this,[t].concat(r))},this),!0):!1}function s(t,n){for(var e=n.length,i=0;e>i;i++)t.splice(n[i]-i,1)}function o(t,n){return Array.prototype.slice.call(t,n||0)}function c(){this.__context=this,this.__events={},this.__items={},this.__uid=n()}function a(){c.prototype.constructor.apply(this,arguments)}function u(){this.$get=function(){return f.$radioChannel}}function h(){this.exports=f,this.$get=function(){return f.$radio}}var l={};t.extend(c.prototype,{listenTo:function(t){var n=o(arguments,1),i=e(t);return n[3]=this.__uid,i.on.apply(i,n),this},listenToOnce:function(t){var n=o(arguments,1),i=e(t);return n[3]=this.__uid,i.once.apply(i,n),this},off:function(t,n,e){var o=this.__events[t]||[],c=void 0===n,a=void 0===t,u=void 0===e;if(r.call(this,"off",t,n,e))return this;if(a){if(u)return this.__events=[],this;for(var h in this.__events)o=this.__events[h],s(o,i(o,{callback:n,listener:e}));return this}return c&&u?(delete this.__events[t],this):(s(o,i(o,{callback:n,listener:e})),this)},on:function(t,n,e,i){var s=r.call(this,"on",t,n,e,i);if(s||void 0===t||void 0===n)return this;var o=this.__events[t]||(this.__events[t]=[]);return o.push({callback:n,context:e,listener:i}),this},once:function(t,n){var e=o(arguments),i=r.apply(this,["once"].concat(e));return void 0===n||i?this:(n.__once=!0,this.on.apply(this,e))},reply:function(t,n){return r.call(this,"reply",t,n)?this:(this.__items[t]={value:n},this)},replyOnce:function(t,n){return r.call(this,"replyOnce",t,n)?this:(this.__items[t]={__once:!0,value:n},this)},reset:function(){return this.__events={},this.__items={},this},request:function(t){var n=this.__items[t]||{};return n.__once&&delete this.__items[t],n.value},setContext:function(t){return this.__context=t||this,this},stopListening:function(n,i,r){return void 0===n?(t.forEach(l,function(t){t.off(void 0,null,this.__uid)},this),this):(e(n).off(i,r||null,this.__uid),this)},trigger:function(t){var n=n=o(arguments,1),e=this.__events[t],i=[];if(void 0===e)return r.apply(this,["trigger",t].concat(n)),this;for(var c,a=0;a<e.length;a++)c=e[a],c.callback.apply(c.context||this.__context,n),c.callback.__once&&i.push(a);return s(e,i),this}}),t.extend(a.prototype,c.prototype,{channel:function(t,n){var i=e(t);return void 0!==i&&i.setContext(n),i},removeChannel:function(t){return delete l[t],this},triggerChannel:function(t,n){var e=Array.prototype.slice.call(arguments,1),i=this.channel(t);return i.trigger.apply(i,e),this}});var f={$radio:new a,$radioChannel:c,$radioChannels:l};return t.extend(h.prototype,a.prototype),t.module("ngRadio",[]).provider("$radioChannel",u).provider("$radio",h),f.$radio});