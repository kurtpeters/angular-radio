!function(t,n){"use strict";"function"==typeof define&&define.amd?define(["ngRadio"],n):t.ngRadio=n(t.angular)}(this,function(t){"use strict";function n(){return"c_"+(new Date).getTime()}function i(t){return l[t]||(l[t]=new u)}function e(t,n){for(var i,e=[],s=0;s<t.length;s++)i=t[s],(i.callback===n.callback||void 0!==i.listener&&i.listener===n.listener)&&e.push(s);return e}function s(n,i){var e=/\s+/g,s=o(arguments,2);return t.isObject(i)?(t.forEach(i,function(t,i){this[n].apply(this,[i,t].concat(s))},this),!0):e.test(i)?(t.forEach(i.split(e),function(t){this[n].apply(this,[t].concat(s))},this),!0):!1}function r(t,n){for(var i=n.length,e=0;i>e;e++)t.splice(n[e]-e,1)}function o(t,n){return Array.prototype.slice.call(t,n||0)}function u(){this.__context=this,this.__events={},this.__items={},this.__uid=n()}function h(){u.prototype.constructor.apply(this,arguments)}function c(){u.call(this),this.$new=function(){return new u},this.$get=t.bind(this,function(){return this})}function a(){t.extend(this,_.$radio),this.$get=function(){return _.$radio}}var l={};t.extend(u.prototype,{listenTo:function(t,n,e,s){var r=o(arguments,1),u=i(t);return void 0===s?r.push(this,this.__uid):r.push(this.__uid),u.on.apply(u,r),this},listenToOnce:function(t,n,e,s){var r=o(arguments,1),u=i(t);return void 0===s?r.push(this,this.__uid):r.push(this.__uid),u.once.apply(u,r),this},off:function(t,n,i){var o=this.__events[t]||[],u=void 0===n,h=void 0===t,c=void 0===i;if(s.call(this,"off",t,n,i))return this;if(h){if(c)return this.__events=[],this;for(var a in this.__events)o=this.__events[a],r(o,e(o,{callback:n,listener:i}));return this}return u&&c?(delete this.__events[t],this):(r(o,e(o,{callback:n,listener:i})),this)},on:function(t,n,i,e){var r=s.call(this,"on",t,n,i,e);if(r||void 0===t||void 0===n)return this;var o=this.__events[t]||(this.__events[t]=[]);return o.push({callback:n,context:i,listener:e}),this},once:function(t,n){var i=o(arguments),e=s.apply(this,["once"].concat(i));return void 0===n||e?this:(n.__once=!0,this.on.apply(this,i))},reply:function(t,n,i){return s.call(this,"reply",t,n)?this:(this.__items[t]={context:i,value:n},this)},replyOnce:function(t,n,i){return s.call(this,"replyOnce",t,n)?this:(this.__items[t]={__once:!0,context:i,value:n},this)},reset:function(){return this.__events={},this.__items={},this},request:function(n){var i=o(arguments,1),e=this.__items[n]||this.__items["default"]||{};return e.__once&&this.stopReplying(n),t.isFunction(e.value)?e.value.apply(e.context||this.__context,i):e.value},setContext:function(t){return this.__context=t||this,this},stopListening:function(n,e,s){return void 0===n?(t.forEach(l,function(t){t.off(void 0,null,this.__uid)},this),this):(i(n).off(e,s||null,this.__uid),this)},stopReplying:function(t){if(void 0===t){var n=this.__items["default"];this.__items={"default":n}}return"string"==typeof t&&delete this.__items[t],this},trigger:function(t){var n=n=o(arguments,1),i=this.__events[t],e=[];if(void 0===i)return s.apply(this,["trigger",t].concat(n)),this;for(var u,h=0;h<i.length;h++)u=i[h],u.callback.apply(u.context||this.__context,n),u.callback.__once&&e.push(h);return r(i,e),this}}),t.extend(h.prototype,u.prototype,{channel:function(t,n){var e=i(t);return void 0!==e&&e.setContext(n),e},removeChannel:function(t){return delete l[t],this},triggerChannel:function(t){var n=o(arguments,1),i=this.channel(t);return i.trigger.apply(i,n),this}});var _={$radio:new h,$radioChannel:u,$radioChannels:l};return t.extend(c.prototype,u.prototype),t.extend(a.prototype,h.prototype),t.module("ngRadio",[]).provider("$radioChannel",c).provider("$radio",a),_.$radio});